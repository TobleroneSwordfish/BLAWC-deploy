<!DOCTYPE html>
<html lang="en">
<head th:insert="fragments/general.html :: header"/>
<head>
    <script src="http://js.nicedit.com/nicEdit-latest.js" type="text/javascript"></script>
    <script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script>
    <meta charset="UTF-8">
    <title>Sending email</title>
</head>
<body>
<div th:replace="fragments/general.html :: top-bar"></div>

<div class="container">
    <div class="card">
        <div class="card-body">
            <form method="post" th:action="@{/send-email}" th:object="${sendEmail}">


                <div class="form-group" style="width: 100%">
                    <input style="width: 50%;" type="text" th:field="*{subject}"/>
                    <textarea style="width: 100%; height: 60%;" name="body" th:field="*{body}">Dear sir, I regret to inform you that the late etc etc.</textarea>
                </div>


                <div class="form-group" id="addresses">
                    <input type="text" th:each="address, iter : ${sendEmail.addresses}" th:name="|addresses[${iter.index}]|" th:value="${address}"/>
                </div>


                <button type="button" id="add-recipient">Add recipient</button>
                <script>
                    jQuery(document).ready(function($) {
                        $("#add-recipient").click(function() {
                            $("#addresses").append("<input type='text' name='addresses[" + $("#addresses > input").length + "]'/>")
                        });
                    });
                </script>
                <button type="submit">Send</button>
            </form>
        </div>
    </div>
</div>
</body>
</html>